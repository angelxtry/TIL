# 03.C#기초

## 3.2 형변환

### 3.2.1 암시적 변환

* 범위가 작은 데이터 타입에서 그 값을 충분히 담을 수 있는 큰 타이븡로 형변환하는 것은 컴파일러가 암시적 변환으로 간주해서 오류 없이 컴파일 된다.
* 큰 값을 표현할 수 있는 데이터에서 작은 타입으로 대입하는 경우 암시적 변환이 불가능하다. 명시적 변환은 가능하다.

### 3.3.4 변수

#### 3.3.4.1 스택과 힙

* 윈도우 프로그램은 기본적으로 하나의 스레드를 갖는다.
* 개별 스레드마다 전용으로 사용할 수 있는 저장소가 메모리에 할당되는데 그 영역을 스택이라고 한다.
* 힙은 프로그램에서 필요에 의해 메모리를 사용하겠다고 요청했을 때 사용된다.
* 닷넷에서는 CLR이 직접 프로그램에서 사용될 힙을 관리한다.

* 스택은 변수를 선언하는 것만으로 사용할 수 있게 C# 컴파일러에 의해 자동 할당 및 해제된다.
* 힙에 메모리를 할당하는 것은 개발자가 명시적으로 요청한 것이므로 해제 과정이 필요하다.
* 네이티브 환경에서는 C/C++ 언어 등으로 프로그램을 만들면 메모리 할당과 해제를 반드시 쌍으로 맞춰야만 했다.
* C# 프로그램이 동작하는 관리 환경의 경우 개발자는 할당만 하고 해제는 관리 환경 내의 특정 구성요소가 담당한다.

#### 3.3.4.2 값 Type을 가리키는 변수

* 값 자체가 스택 영역에 할당되고 변수는 그 메모리를 가리키는 프로그램 내의 식별자다.

#### 3.3.4.3 참조 type을 가리키는 변수

* string, 배열, 클래스, object 등
* 값 type은 스택에 저장한다.
* 참조 type은 힙 영역에 메모리를 할당하고, 스택의 변수 값은 힙의 데이터 주소를 가리키게 된다.
* 값을 할당하지 않은 string 변수는 스택 변수의 값이 숫자 0을 담고 있다.
* 즉, 가리킬 수 있는 힙 주소가 없다.
* 하지만 참조형 변수의 경우 숫자 0을 대입할 수 없으므로 null 예약어를 사용한다.
* 초기화되지 않은 모든 참조항 변수는 null 값을 가진다.
* 참조형 변수가 더는 사용되지 않음을 명시하기 위해 null을 할당하기도 한다.

#### 3.3.4.4 기본값

* 값 type을 가리키는 변수는 해당 자료형에 대해 무조건 메모리가 할당되므로 그 메모리 영역에 기본값을 갖게 된다.
* 닷넷은 무조건 0으로 초기화한다.
* bool은 false가 기본값
* 참조 type은 모두 null

### 3.3.5 상수

* const
* 컴파일러 입장에서 보자면 상수는 반드시 컴파일할 때 값이 결정되야 한다.

```cs
const int maxN = Math.Max(0, 5);
```

* Math.Max 메서드가 실행된 이후에 값이 결정된다.
* 컴파일러가 미리 그 값을 결정할 수 없으므로 오류 발생

```cs
const int n = 5 * 100 / 2;
```

* 위 코드는 컴파일 시에 계산해서 대입할 수 있으므로 상수가 가능

## 3.4 배열

```cs
int [] products = new int[5];
string [] names = new string[1000];
```

* C#에서 new 키워드는 참조 type과 함께 사용되는 경우 필요한 메모리를 힙에 할당하는 역할을 한다.

* 배열은 선언하면서 초기화하는 방법이 2가지가 있다.

```cs
int [] products = new int[5]{1, 2, 3, 4, 5};
int [] products1 = new int[]{1, 2, 3, 4, 5};
```

### 3.4.1 다차원 배열

* 선언

```cs
int [,] arr2 = new int [10, 5];
int [,,] arr3 = new int [10, 10, 10];
```

* 초기화

```cs
int [,] arr2 = new int [2, 3]{
    {1, 2, 3},
    {4, 5, 6}
}
```

### 3.4.2 가변 배열 jagged array

```cs
int [][] arr = new int[5][];
arr[0] = new int[10];
arr[1] = new int[5];
arr[2] = new int[8];
arr[3] = new int[9];
arr[4] = new int[3];
```

* 다차원 배열이 콤마를 이용하여 차수를 구분하는 반면, 가변 배열은 각 차수마다 대괄호를 사용한다.
* 가변 배열은 배열의 요소가 임의 크기의 배열이다.
* 직관적으로 이해하기에는 다차원 배열이 더 편하다.

#### 3.5.2.4 foreach

```cs
int [] arr = new int[]{1, 2, 3, 4, 5};
foreach(int x in arr)
{
    Console.WriteLine(x);
}
```
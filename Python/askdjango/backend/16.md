# Django Template Engine(Template Tag)

django ì² í•™

Fat Model

* í’ì„±í•œ ëª¨ë¸

* ê°€ê¸‰ì ì´ë©´ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ modelì— êµ¬í˜„í•˜ë„ë¡ ê¶Œì¥

Stupid Template

* Templateì— ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ìµœëŒ€í•œ ì§€ì–‘í•˜ì.

Thin View

* Viewì—ë„ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ìµœëŒ€í•œ ì§€ì–‘í•˜ê³ , ì¸ìŠ¤í„´ìŠ¤ë¥¼ íšë“í•˜ì—¬ ëœë”ë§ ì •ë„ì˜ ì—­í• ë§Œ 

----

Template Engines ëª‡ ê°€ì§€

Django Template Engine : Django ê¸°ë³¸ í…œí”Œë¦¿ ì—”ì§„

Jinja2 : ì¨ë“œíŒŒí‹° ì—”ì§„ì´ì—ˆìœ¼ë‚˜, ìµœê·¼ì— ìµœì†Œí•œì˜ ì§€ì›ì´ ë‚´ì¥ë¨

* Django Template Engineê³¼ ìœ ì‚¬

* ì¥ê³  í”„ë¡œì íŠ¸ì—ì„œ ì“°ë ¤ë©´ django-jinja ì¶”ì²œ

ê°€ê¸‰ì ì´ë©´ ê¸°ë³¸ ì¥ê³  í…œí”Œë¦¿ ì—”ì§„ì— ìµìˆ™í•´ì§€ê¸°ë¥¼ ê¶Œì¥

----

Django Template Engine Syntax

{% extends "base.html" %}

{# ì´ê²ƒì€ ì£¼ì„ì…ë‹ˆë‹¤. #}

{% for row in rows %}
    <tr>
        {% for name in row %}
            <td>{{ name }}</td>
        {% endfor %}
    </tr>
{% endfor %}

extends ê°™ì€ ê²ƒì€ template tagë¼ê³  ë¶€ë¥¸ë‹¤.

----

Variables

{{ first_name }}

dictionayì˜ keyì— ì ‘ê·¼ ê°€ëŠ¥ : {{ mydict.key }}

ex
```py
people = {'tom': 10, 'bob': 20}
people['tom']

{{ people.tom }}
```

objectì˜ attirbute : {{ myobj.attr }}

í•¨ìˆ˜ í˜¸ì¶œë„ attrì²˜ëŸ¼ ì ‘ê·¼í•˜ì§€ë§Œ, ì¸ììˆëŠ” í•¨ìˆ˜ëŠ” í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.

{{ myobj.func }}

```
pythonì—ëŠ” callableì´ë¼ëŠ” ë‚´ì¥í•¨ìˆ˜ê°€ ìˆë‹¤.

callalbe(param) ì´ë¼ê³  í˜¸ì¶œí–ˆì„ ë•Œ paramì´ í˜¸ì¶œê°€ëŠ¥í•œ ê°ì²´ë¼ë©´ True, í˜¸ì¶œì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ë©´ Falseê°€ ë¦¬í„´ëœë‹¤.
```

ë¦¬ìŠ¤íŠ¸ ì¸ë±ìŠ¤ ì ‘ê·¼ë„ ê°€ëŠ¥ : {{ mylist.0 }}

----

Django Template Tag

* TagëŠ” Django Templates ìš© í•¨ìˆ˜

{% %} í™€ë¡œ ì“°ì´ê¸°ë„ í•˜ë©° 2ê°œ ì´ìƒì´ ì¡°í•©ë˜ê¸°ë„ í•œë‹¤.

built-in tagê°€ ì§€ì›ë˜ë©° ì¥ê³ ì•± ë³„ë¡œ ì»¤ìŠ¤í…€ tag ì¶”ê°€ ê°€ëŠ¥

block

comment

csrf_token

extends

for

for ... empty

if

ifchanged

include

load

lorem

now

url

verbatim

with ë“±

----

block tag

* í…œí”Œë¦¿ ìƒì†ì—ì„œ ì‚¬ìš©

* ìì‹ í…œí”Œë¦¿ì´ ì˜¤ë²„ë¼ì´ë”©í•  block ì˜ì—­ì„ ì •ì˜

* ìì‹ í…œí”Œë¦¿ì€ ë¶€ëª¨ê°€ ì •ì˜í•œ blockì— í•œí•´ì„œ ì¬ì •ì˜ ê°€ëŠ¥. ê·¸ ì™¸ì—ëŠ” ëª¨ë‘ ë¬´ì‹œ.

{% block block-name %}
    block ë‚´ì— ë‚´ìš© ì…ë ¥ ê°€ëŠ¥
{% endblock %}

----

comment tag

* í…œí”Œë¦¿ ì£¼ì„

* comment ì˜ì—­ì„ ì„œë²„ ë‹¨ì—ì„œ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ

{# í•œ ì¤„ ì£¼ì„ #}

{% comment "Optional Note" %}
    ì—¬ëŸ¬ ì¤„ ì£¼ì„
    ì´ ë¶€ë¶„ì€ ëœë”ë§ë˜ì§€ ì•ŠëŠ”ë‹¤.
    Optional NoteëŠ” ì•ˆì¨ë„ ë¬´ê´€í•˜ë‹¤. ì±…ê°ˆí”¼ ê°™ì€ ìš©ë„ë¡œ í™œìš©í•  ìˆ˜ ìˆë‹¤.
{% endcomment %}

* Javascript ì£¼ì„ /* */, HTMLì£¼ì„ <!-- --> ê³¼ í˜¼ë™í•˜ì§€ ë§ì.

* JS, HTML ì£¼ì„ì€ ì„œë²„ì¸¡ì—ì„œëŠ” ëª¨ë‘ í´ë¼ì´ì–¸íŠ¸ë¡œ ëœë”ë§í•œë‹¤. ë‹¨ì§€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¬´ì‹œí•œë‹¤.

----

csrf token

* Cross Site Request Forgeriesë¥¼ ë§‰ê¸° ìœ„í•´ CSRF Middlewareê°€ ì œê³µ

* HTML Formì˜ POST ìš”ì²­ì—ì„œ CSRF í† í°ì„ ì²´í¬

* csrf token tagë¥¼ ì´ìš©í•˜ì—¬ tokenì„ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆë‹¤.

Formì€ get, postìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤.

get ìš”ì²­ì´ ìˆì„ ë•Œ ë¹ˆ formì„ ë³´ì—¬ì£¼ê³ , ì‚¬ìš©ìê°€ formì„ ì±„ì›Œì„œ ì „ì†¡í•˜ë©´ postë¥¼ í†µí•´ ë°›ëŠ”ë‹¤.

ë¹ˆ formì„ ë³´ì—¬ì¤„ ë•Œ ì„œë²„ëŠ” csrf tokenì„ ë°œê¸‰í•˜ê³  post ìš”ì²­ì´ ì˜¤ë©´ ë°œê¸‰í•œ csrf tokenì„ ê²€ì¦í•œë‹¤.

----

extends tag

* ìì‹ í…œí”Œë¦¿ì—ì„œ ë¶€ëª¨ í…œí”Œë¦¿ ìƒì†ì„ ëª…ì‹œ

* extends tagëŠ” í•­ìƒ í…œí”Œë¦¿ì˜ ì²˜ìŒì— ìœ„ì¹˜í•´ì•¼ í•œë‹¤.

* ìƒì†ë°›ì€ ìì‹ í…œí”Œë¦¿ì€ ë¶€ëª¨ í…œí•„ë¦¿ì—ì„œ ì •ì˜í•œ blockë§Œ ì¬ì •ì˜ í•  ìˆ˜ ìˆë‹¤.

{% extends "base.html" %}

----

for tag

* ì§€ì • ê°ì²´ë¥¼ ìˆœíšŒ

* íŒŒì´ì¬ì˜ for ë¬¸ê³¼ ë™ì¼

<ul>
{% for athlete in athlete_list %}
    <li>{{ athlete.name }}</li>
{% endfor %}
</ul>

----

loopë‚´ ì¶”ê°€ ì§€ì› variable

* forloop.counter : ë°˜ë³µ ì¸ë±ìŠ¤ (1ë¶€í„° ì‹œì‘í•˜ì—¬ 1ì”© ì¦ê°€)

* forloop.counter0 : ë°˜ë³µ ì¸ë±ìŠ¤ (0ë¶€í„° ì‹œì‘í•˜ì—¬ 1ì”© ì¦ê°€)

* forloop.revcounter : ë°˜ë³µ ì¸ë±ìŠ¤ (ë ì¸ë±ìŠ¤ë¶€í„° ì‹œì‘ 1ì”© ê°ì†Œ)

* forloop.revcounter0 : ë°˜ë³µ ì¸ë±ìŠ¤ (ë ì¸ë±ìŠ¤ -1ë¶€í„° ì‹œì‘, 1ì”© ê°ì†Œ)

* forloop.first, forloop.last : ì²« ì‹¤í–‰ ì—¬ë¶€, ë§ˆì§€ë§‰ ì‹¤í–‰ ì—¬ë¶€

* forloop.parentloop : ì¤‘ì²© loopì—ì„œ ë¶€ëª¨ loopë¥¼ ì§€ì •

----

for ... empty tag

* for tag ë‚´ì—ì„œ ì§€ì • objectë¥¼ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ë¹„ì—ˆì„ ë•Œ empty blockì´ ìˆ˜í–‰

<ul>
    {% for athlete in athlete_list %}
        <li>{{ athlete.name }}</li>
    {% empty %}
        <li>Sorry, no athlete in this list.</li>
    {% endfor %}
</ui>

ìœ„ ì½”ë“œëŠ” ì•„ë˜ì˜ ì½”ë“œì™€ ë™ì¼í•˜ë‹¤.

{% if athlete_list %}
    {% for athlete in athlete_list %}
        {{ athlete_name }}
    {% endfor %}
        empty
{% endif %}

----

if tag

{% if athlete_list %}
    number of athletes: {{ athlete_list|length }}
{% elif athlete_in_locker_room_list %}
    Athletes  should be out of the locker room soon!
{% else %}
    No athletes.
{% endif %}

----

if changed

* ë³€ìˆ˜ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ contentì˜ ë‚´ìš©ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ True íŒì •

* ë³€ìˆ˜ê°€ ì§€ì •ë˜ë©´ ì§€ì • ë³€ìˆ˜ê°’ì´ ë³€ê²½ì´ ë˜ì—ˆì„ ë•Œ True íŒì •

<h1>Archive for {{ year }}</h1>

{% for date in days %}
    {% ifchanged %}<h3>{{ date|date:"F" }}</h3>{% endifchanged %}
    <a href="{{ date|date: "M/d"|lower }}/">{{ date|date:"j" }}</a>
{% endfor %}

ifchangedì— ì¸ìë¥¼ ë„˜ê¸°ì§€ ì•Šì•˜ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ë’¤ì˜ ë¬¸ìì—´ì´ ë³€ê²½ì´ ë˜ì—ˆëŠ”ì§€ ê²€ì‚¬í•œë‹¤.

{% for date in days %}
    {% ifchanged date.date %}
        {{ date.date }}
    {% endifchanged %}
    {% ifchanged date.hour date.date %}
        {{ date.hour }}
    {% endifchanged %}
{% endfor %}

ifchangedì— date.date ì¸ìë¥¼ ë„˜ê²¼ë‹¤. ì¸ìê°€ ë³€ê²½ë ë•Œë§Œ ì¶œë ¥ëœë‹¤.

----

include tag

* ë‹¤ë¥¸ í…œí”Œë¦¿ì„ ë¡œë”©/ë Œë”ë§ì„ ìˆ˜í–‰í•˜ë©°, í˜„ì¬ contextê°€ ê·¸ëŒ€ë¡œ ì „ë‹¬

* include ì‹œì— keywordì¸ìë¥¼ ì§€ì •í•˜ì—¬, ì¶”ê°€ context ì§€ì • ê°€ëŠ¥

{% include "foo/bar.html" %}

{% include "name_snippet.html" with person="Jane" greeting="Hello" %}

----

load tag

* pythonì˜ importì™€ ìœ ì‚¬í•˜ë‹¤.

* ì»¤ìŠ¤í…€ Template Tag/Filter Set ë¡œë”©

* load ì‹œì— ë‹¤ìˆ˜ íŒ¨í‚¤ì§€ ê¸°ì… ê°€ëŠ¥

{% load custom_tags1 package.other_tags2 %}

* load ì‹œì— libraryë‚´ íŠ¹ì • filter/tag ì„ íƒì  ë¡œë”© ê¸°ëŠ¥

{% load foo bar from custom_tag1 %}

----

lorem tag

* ëœë¤ ì±„ìš°ê¸° í…ìŠ¤íŠ¸ë¥¼ ìƒì„±

{% lorem [count] [method] [random] %}

* count : ìƒì„±í•  ë‹¨ë½/ë‹¨ì–´ì˜ ìˆ˜(ë””í´íŠ¸ 1)

* method : ë‹¨ì–´ì¼ ê²½ìš° w ì§€ì •, HTML ë‹¨ë½ì¼ ê²½ìš° pì§€ì •, Plain Text ë‹¨ë½ì¼ ê²½ìš° b ì§€ì •(ë””í´íŠ¸ b)

* random : random ì§€ì •/ë¯¸ì§€ì •, ì§€ì •ì‹œì—ëŠ” ë³´í†µì˜ ì±„ìš°ê¸° í…ìŠ¤íŠ¸ë¥¼ ì“°ì§€ ì•Šê³ , ëœë¤ ë¬¸ìì—´ ìƒì„±

{% lorem %} : ë³´í†µì˜ ì±„ìš°ê¸° í…ìŠ¤íŠ¸ ì¶œë ¥

{% lorem 3 p %} : HTML ë‹¨ë½ 3ê°œ ì¶œë ¥

{% lorem 2 w random %} : ëœë¤ ë‹¨ì–´ 2ê°œ ì¶œë ¥

----

now tag

* í˜„ì¬ ë‚ ì§œ/ì‹œê°„ì„ ì¶œë ¥

* ì¶œë ¥í¬ë§·ì€ date template tag ê²€ìƒ‰í•˜ì—¬ ì°¸ì¡°

It is {% now "jS F Y H:i" %}

----

url tag

* URL Reverseë¥¼ ìˆ˜í–‰í•œ URL ë¬¸ìì—´ì„ ì¶œë ¥

* ì¸ìì²˜ë¦¬ëŠ” django.shortcuts.resolve_url í•¨ìˆ˜ì™€ ìœ ì‚¬í•˜ê²Œ ì²˜ë¦¬í•˜ë‚˜, get_absolute_url ì²˜ë¦¬ëŠ” í•˜ì§€ ì•ŠëŠ”ë‹¤.

{% url "some-url-name-1" %}

{% url "some-url-name-2" arg arg2 %}

{% url "some-url-name-2" arg arg2 as the_url %}

----

verbatim tag

* ì§€ì • ë¸”ë½ ë‚´ì—ì„œëŠ” ì¥ê³  í…œí”Œë¦¿ ì—”ì§„ì„ í†µí•œ ë Œë”ë§ì„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ

* ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ {{ }} ë¥¼ ì“¸ ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•œ ëª©ì 

{% verbatim %}
    {{if dying}}Still alive.{{/if}}
{% endverbatim %}

----

with tag

* ë³€ìˆ˜ì— ìƒˆë¡œìš´ ê°’ì„ assign

{% with aplha=1 beta=2 %}
...
{% endwith %}

{% with total=business.employees.count %}
    {{ total }} employee{{ total|pluralize }}
{% endwith %}

# 01. Intro

## 1.1 닷넷 프레임워크

* 2002년 마이크로소프트에서 발표한 응용 프로그램 개발 환경으로서 프로세스 가상 머신에 속한다.
* 일반적인 네이티브 언어로 만들어진 프로그램들이 운영체제에서 곧바로 실행되는 것과는 달리, 닷넷 프레임워크를 기반으로 만들어진 응용 프로그램은 반드시 닷넷 프레임워크가 미리 설치된 환경에서만 실행된다.
* 닷넷 프레임워크를 설치하면 가상 머신 역할을 하는 CLR(Common Language Runtime) 구성요소가 실행될 수 있는 환경이 윈도우 운영체제에 마련된다.
* CLR은 프로세스(EXE)가 실행되면 메모리에 함께 적재되어 실행된다.
* 닷넷 프로그램은 외형상 EXE/DLL로 기존의 프로그램과 동일한 구조다.
* 하지만 내부적으로는 CLR 구성요소가 로드되어 실행되고, 그 CLR이 EXE/DLL에 함께 저장되어 있는 닷넷 코드를 실행한다.

* C# 컴파일러는 소스코드를 기계어가 아닌 IL(Intermediate Language)이라고 하는 중간 언어로 EXE/DLL 파일 내부에 생성한다.
* 그리고 프로그램이 시작하자마자 CLR을 로드하는 코드를 자동으로 EXE 파일 내부에 추가한다.
* 사용자가 C#으로 개발된 애플리케이션을 실행하면 내부적으로 CLR이 먼저 로드되고, CLR은 EXE 파일 내에 있는 IL코드를 로드해서 실행 단계에 들어간다.

### 1.1.1 닷넷 호환 언어

* 어떤 언어의 컴파일러든지 결과물을 IL로 생성한다면 그것을 CLR이 그것을 실행할 수 있다.
* IL로 번역하는 언어를 닷넷 호환 언어(.NET-Compliant Language)라고 하며, C#도 그 중 하나다.
* 닷넷 호환 언어는 IL코드의 결과물을 공유하기 때문에 상호 호출이 가능하다.

### 1.1.2 공통 중간 언어

* JVM에서는 중간 언어를 Bytecode라고 한다.
* 닷넷의 CLR에서는 이것을 CIL(Common Intermediate Language)이라고 하며, 보통 줄여서 IL코드 또는 MSIL코드라고 한다.
* 이것은 CPU에 독립적이다.
* 모든 닷넷 호환 언어는 소스코드를 IL코드로 컴파일하고, CLR이 실행될 때 IL 코드를 CPU의 기계어로 최종 번역한다.
* IL코드는 그 자체로 프로그래밍 언어 문법을 가지며 ILASM.EXE라는 컴파일러를 가지고 있다.
* C#으로 프로그램을 작성하여 C# 컴파일러로 빌드하면 IL코드로 변한다.
* IL코드는 가상 머시니에서 실행되다는 의미에서 일종의 기계어와 유사하다.
* IL코드를 닷넷 프레임워크에 포함된 ilasm.exe로 컴파일하면 C#에서와 동일한 프로그램이 실행된다.

### 1.1.3 공용 타입 시스템 CTS Common Type System

* 닷넷 호환 언어가 지켜야 할 타입의 표준 규적을 정의한 것
* 닷넷 호환 언어가 CTS에서 정의된 모든 규격을 구현할 필요는 없다.

### 1.1.4 공용 언어 사양 CLS Common Language Specification

* 닷넷 호환 언어가 지켜야 할 최소한의 언어 사양
* 닷넷 호환 언어는 CLS를 완벽하게 구현해야 한다.
* 닷넷 호환 언어끼리 호출해야 하는 경우 CLS를 만족시키도록 코드를 작성해야 한다.

### 1.1.5 메타데이터

* CLR에서 동작하는 실행 파일은 완전하게 자기 서술적인(self-descriptive) 메타데이터를 제공한다.
* 외부에서는 이 정보를 리플렉션(reflection)이라는 기술을 통해 사용할 수 있다.
* C#언어로 컴파일된 EXE/DLL 파일에도 메타데이터가 포함되어 있다.
* 다른 사람이 만든 EXE/DLL 파일에서 어떤 클래스와 메서드가 제공되는지 확인하려면 메타데이터를 통해 알 수 있다.

### 1.1.6 어셈블리, 모듈, 매니페스트

* C#으로 프로그램을 만드는 경우 EXE/DLL 파일을 만들게 된다.
* 닷넷에서는 이 실행 파일을 어셈블리(Assembly)라고 한다.
* 기계어와 1:1 대응되는 프로그래밍 언어인 어셈블리와 이름이 같으므로 혼동할 수 있다.
* 어셈블리는 1개 이상의 모듈로 구성되는데, 모듈 하나당 한 개의 파일이 대응된다.
* 여러 개의 파일이 하나의 어셈블리를 구성하고 있다면 모듈 중 하나는 반드시 다른 모듈의 목록을 관리하는 매니페스트(Manifest) 데이터를 포함하고 있어야 한다.
* 매니페스트를 포함하고 있는 않은 모듈은 보통 확장자가 netmodule이다.
* 매니페스트를 포함하는 경우 확장자가 EXE/DLL 이다.
* 어셈블리는 그 자체가 참조 단위이자 배포 단위이다.
* 다른 사람이 만든 어셈블리에 구현된 코드를 사용하고 싶다면 매니페스트가 포함된 모듈 및 그와 관련된 모든 모듈을 함께 가지고 있어야 한다.

### 1.1.7 공용 언어 기반구조 CLI Common Language Infrastructure

* 마이크로소프트에서 ECMA 표준으로 제출한 공개 규약
* CLI 규격을 마이크로소프트에서 구현한 것이 CLR이다.
* 모노 프레임워크 및 닷넷 코어라는 또 다른 CLI 구현체가 오픈소스로 개발되고 있다.

### 1.1.8 공용 언어 런타임 CLR Common Language Runtime

* CLI 사양을 따르는 가장 대표적인 VM
* 윈도우 운영체제용으로만 배포되고 있다.
* CLR에는 두 가지 큰 기능이 있는데, 하나는 중간 언어를 JIT 컴파일러를 이용해 기계어로 변환하는 것이고, 다른 하나는 가비지 콜렉터를 제공하여 동적 메모리 할당 및 회수를 지원하는 것이다.
* CLR 자체를 Managed Environment라고도 하고, CLR이 로드되는 프로세스를 기존의 네이티브 프로세스와 구별해 Managed Process라고 한다.
* CLI, CLR, 닷넷은 보통 구분없이 사용되고 있다.

### 1.1.9 닷넷 프레임워크

* CLR + 부가 구성 요소
* 부가 구성 요소에는 다음과 같은 것들이 포함된다.
  * BCL(Base Class Library)
  * 부가적인 실행 파일
  * GAC(Global Assembly Cache): 컴퓨터에서 실행되는 닷넷 응용 프로그램이 어셈블리 파일을 공통적으로 찾을 수 있는 전역 저장소. 일반적으로 C:/Windows\assembly 폴더에 있으며 각종 DLL을 담고 있다.

### 1.1.10 C#과 닷넷 프레임워크의 관계

* C#은 닷넷 프레임워크를 기반으로 IL 코드를 생성하는 컴파일러에 불과하다.
* C#을 배운다는 것은 문법적인 요소만을 제외하고 닷넷 프레임워크를 공부한다는 의미다.
* C#을 공부하는 것이 좋은 이유는 마이크로소프트가 닷넷 프레임워크를 위해 만든 언어이기 때문이다.

## 1.2 닷넷 코어와 닷넷 표준

* 닷넷 코어가 CLI(Common Language Infrastructure)의 또 다른 구현체이긴 하지만 다중 플랫폼(맥, 리눅스 등)에서 실행할 수 있도록 만들어졌다는 점에서 강점을 가진다.
* 닷넷 코어와 닷넷 프레임워크는 하부 구조는 공유하고 있는 반면 기반 라이브러리 단계부터는 독자적인 구현으로 이루어져 있다.
* 기반 라이브러리 불일치를 해결하기 위해 표준을 만든 규격이 닷넷 표준(.NET Standard) 라이브러리다.

* C#을 공부하게 되면 응용 프로그램의 유형에 따라 다음과 같은 개발을 진행할 수 있다.
* 닷넷 프레임워크
  * 윈도우 운영체제에서 실행할 프로그램을 만드는 경우
* 닷넷 코어(특정 운영체제의 기능에 종속되지 않는다.)
  * 콘솔 응용 프로그램
  * 웹 애플리케이션을 개발하는 경우
  * 클라우드 환경에서의 서비스를 개발하는 경우
* Xamarin 플랫폼
  * 모바일 앱을 개발하는 경우
  * 윈도우 스토어(UWP) 앱 개발을 모바일 앱과 함께 진행하는 경우

# react node bird

## í™˜ê²½ ì„¤ì •

front, back ìƒì„±

front í´ë”ì—ì„œ ë‹¤ìŒ ì‹¤í–‰

```js
cd front
npm init -y
npm i react react-dom next
npm i -D nodemon webpack
npm i -D eslint
```

`.eslintrc` íŒŒì¼ì„ ìƒì„±í•œë‹¤.

```json
{
  "parseOption": {
    "ecmaVersion": 2019,
    "sourceType": "module",
    "ecmaFeatures": {
      "jsx": true
    }
  },
  "env": {
    "browser": true,
    "node": true
  },
  "extends": [
    "eslint:recommended",
    "plugin:react/recommended"
  ],
  "plugins": [
    "import",
    "react-hooks"
  ]
}
```

ì„¤ëª…ì„ ì¶”ê°€í•´ë³´ë©´ `ecmaVersion`ì€ javascript ë²„ì „ì„ ì˜ë¯¸í•œë‹¤.

`soruceType`ì€ `require`ë‚˜ `import` ë“±ì„ ì‚¬ìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì— `module`ë¡œ ì„¤ì •.

`ecmaFeatures`ëŠ” `jsx`ë¥¼ ì¶”ê°€í–ˆë‹¤.

`env`ì—ëŠ” `browser`í™˜ê²½ê³¼ `node`í™˜ê²½ì„ ëª¨ë‘ ì¶”ê°€.

`eslint:recommended`ëŠ” eslintê°€ ì¶”ì²œí•˜ëŠ” ê¶Œì¥ì‚¬í•­ì´ë‹¤.

`.eslintrc` íŒŒì¼ì„ ì‘ì„±í–ˆë‹¤ë©´ ê´€ë ¨ packageë¥¼ ì„¤ì¹˜í•œë‹¤.

```js
npm i -D eslint-plugin-import eslint-plugin-react eslint-plugin-react-hooks
```

## Next.js ë¼ìš°íŒ… ì‹œìŠ¤í…œ

`pages`ë¼ëŠ” í´ë”ë¥¼ ë§Œë“ ë‹¤.

`index.js` íŒŒì¼ì„ ë§Œë“¤ê³  ì‘ì„±í•œë‹¤.

```js
const Home = () => {
  return <div>Hello, Next.</div>;
};

export default Home;

```

`Next`ì—ì„œ reactë¥¼ ì´ë¯¸ import í•˜ê³  ìˆê¸° ë•Œë¬¸ì— í˜„ì¬ëŠ” import í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

`Next`ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ `package.json` íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.

```json
"scripts": {
  "dev": "next",
  "build": "next build",
  "start": "next start"
}
```

`npm run dev`í•˜ë©´ í•´ë‹¹ í”„ë¡œì íŠ¸ê°€ ì‹¤í–‰ëœë‹¤.

ì¶”ê°€ë¡œ ì½”ë“œë¥¼ ë” ì‘ì„±í•´ë³´ì.

`pages/about.js` íŒŒì¼ì„ ì¶”ê°€í•œë‹¤.

```js
const About = () => {
  return <div>about!</div>;
};

export default About;

```

`pages/index.js` íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.

```js
import Link from "next/link";

const Home = () => {
  return (
    <>
      <Link href="/about">
        <a>about</a>
      </Link>
      <div>Hello, Next.</div>
    </>
  );
};

export default Home;

```

ìœ„ì™€ ê°™ì´ ì‘ì„±í•˜ê³  ë¸Œë¼ìš°ì €ì—ì„œ ì—´ì–´ë³´ë©´ aboutì´ë¼ëŠ” ë§í¬ê°€ ë³´ì¸ë‹¤.

Chromeì˜ Network íƒ­ì—ì„œ í™•ì¸í•´ë³´ë©´ about ë§í¬ë¥¼ ëˆ„ë¥¸ í›„ì—ì•¼ aboutì— ëŒ€í•œ ì •ë³´ë¥¼ ë°›ì•„ì™€ í™”ë©´ì— ì¶œë ¥í•œë‹¤.

## Ant design

```js
npm i antd
```

ì½”ë“œê°€ reactë‹¤. ë°”ë¡œ ì‚¬ìš©í•˜ê¸° ì¢‹ë‹¤.

`components/AppLayout.js` í´ë”ì™€ íŒŒì¼ì„ ìƒì„±í•œë‹¤.

```js
import React from "react";
import { Menu, Input } from "antd";

const AppLayout = ({ children }) => {
  return (
    <div>
      <Menu>
        <Menu.Item>NodeBird</Menu.Item>
        <Menu.Item>Profile</Menu.Item>
        <Menu.Item>
          <Input.Search enterButton />
        </Menu.Item>
      </Menu>
      { children }
    </div>
  )
};

export default AppLayout;

```

`index.js` íŒŒì¼ë„ ìˆ˜ì •í•œë‹¤.

```js
import Link from "next/link";
import AppLayout from "../components/AppLayout";

const Home = () => {
  return (
    <>
      <AppLayout>
        <Link href="/about">
          <a>about</a>
        </Link>
        <div>Hello, Next.</div>
      </AppLayout>
    </>
  );
};

export default Home;

```

`AppLayout.js` íŒŒì¼ì—ì„œ ì‚¬ìš©í•œ `children`ì€ `index.js` íŒŒì¼ì—ì„œ `AppLayout` íƒœê·¸ í•˜ìœ„ì˜ ëª¨ë“  í•­ëª©ë“¤ì„ ì˜ë¯¸í•œë‹¤.

`antd`ì˜ cssë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ `Head`ë¥¼ ì‚¬ìš©í•œë‹¤.

```js
import Link from "next/link";
import AppLayout from "../components/AppLayout";
import Head from "next/head";

const Home = () => {
  return (
    <>
    <Head>
      <title>Nodebird</title>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/3.23.6/antd.css" />
    </Head>
      <AppLayout>
        <Link href="/about">
          <a>about</a>
        </Link>
        <div>Hello, Next.</div>
      </AppLayout>
    </>
  );
};

export default Home;

```

`AppLayout`ì˜ ë””ìì¸ì„ ì¡°ê¸ˆ ìˆ˜ì •í•œë‹¤.

```js
import React from "react";
import { Menu, Input } from "antd";

const AppLayout = ({ children }) => {
  return (
    <div>
      <Menu mode="horizontal">
        <Menu.Item key="Home">NodeBird</Menu.Item>
        <Menu.Item key="Profile">Profile</Menu.Item>
        <Menu.Item key="Search">
          <Input.Search enterButton style={{ verticalAlign: "middle" }} />
        </Menu.Item>
      </Menu>
      {children}
    </div>
  );
};

export default AppLayout;

```

## í˜ì´ì§€ ìƒì„±

Profile, Signup í˜ì´ì§€ë¥¼ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ê³  Layoutì— ë§í¬ë¥¼ ì—°ê²°í•œë‹¤.

`pages/profile.js`

```js
import React from "react";

const Profile = () => {
  return <div>Profile</div>;
};

export default Profile;

```

`pages/signup.js`

```js

const Signup = () => {
  return <div>Signup</div>;
}

export default Signup;

```

`components/AppLayout.js`

```js
import React from "react";
import Link from "next/link";
import { Menu, Input, Button } from "antd";

const AppLayout = ({ children }) => {
  return (
    <div>
      <Menu mode="horizontal">
        <Menu.Item key="Home">
          <Link href="/">
            <a>NodeBird</a>
          </Link>
        </Menu.Item>
        <Menu.Item key="Profile">
          <Link href="/profile">
            <a>Profile</a>
          </Link>
        </Menu.Item>
        <Menu.Item key="Search">
          <Input.Search enterButton style={{ verticalAlign: "middle" }} />
        </Menu.Item>
      </Menu>
      <Button>
        <Link href="signup">
          <a>Signup</a>
        </Link>
      </Button>
      {children}
    </div>
  );
};

export default AppLayout;

```

profile, signup í˜ì´ì§€ì—ë„ `AppLayout`ì„ ì¶”ê°€í•œë‹¤.

profile, signupì—ë„ `Head`ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ëª¨ë‘ ì¶”ê°€í•œë‹¤.

```js
import React from "react";
import Head from "next/head";
import AppLayout from "../components/AppLayout";

const Profile = () => {
  return (
    <>
      <Head>
        <title>Nodebird</title>
        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/antd/3.23.6/antd.css"
        />
      </Head>
      <AppLayout>
        <div>Profile</div>
      </AppLayout>
    </>
  );
};

export default Profile;

```

```js
import React from "react";
import Head from "next/head";
import AppLayout from "../components/AppLayout";

const Signup = () => {
  return (
    <>
      <Head>
        <title>Nodebird</title>
        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/antd/3.23.6/antd.css"
        />
      </Head>
      <AppLayout>
        <div>Signup</div>
      </AppLayout>
    </>
  );
};

export default Signup;

```

ì¤‘ë³µ ì½”ë“œê°€ ë§ì§€ë§Œ ë‚˜ì¤‘ì— ì •ë¦¬í•œë‹¤.

## íšŒì›ê°€ì…

ì§€ë£¨í•œ í¼ì´ ì´ì–´ì§„ë‹¤.

`pages/signup.js`

```js
import React, { useState } from "react";
import Head from "next/head";
import AppLayout from "../components/AppLayout";
import { Form, Input, Checkbox, Button } from "antd";

const Signup = () => {
  const [id, setId] = useState("");
  const [nick, setNick] = useState("");
  const [password, setPassword] = useState("");
  const [passwordCheck, setPasswordCheck] = useState("");
  const [term, setTerm] = useState(false);
  const [passwordError, setPasswordError] = useState(false);
  const [termError, setTermError] = useState(false);

  const onSubmit = e => {
    e.preventDefault();
    if (password !== passwordCheck) {
      return setPasswordError(true);
    }
    if (!term) {
      return setTermError(true);
    }
    console.log({
      id,
      nick,
      password,
      passwordCheck,
      term
    });
  };
  const onChangeId = e => {
    setId(e.target.value);
  };
  const onChangeNick = e => {
    setNick(e.target.value);
  };
  const onChangePassword = e => {
    setPassword(e.target.value);
  };
  const onChangePasswordCheck = e => {
    setPasswordError(e.target.value !== password);
    setPasswordCheck(e.target.value);
  };
  const onChangeTerm = e => {
    setTermError(false);
    setTerm(e.target.checked);
  };

  return (
    <>
      <Head>
        <title>Nodebird</title>
        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/antd/3.23.6/antd.css"
        />
      </Head>
      <AppLayout>
        <Form onSubmit={onSubmit} style={{ padding: 10 }}>
          <div>
            <label htmlFor="user-id">ID</label>
            <br />
            <Input name="user-id" required value={id} onChange={onChangeId} />
          </div>
          <div>
            <label htmlFor="user-nick">Nick</label>
            <br />
            <Input
              name="user-nick"
              required
              value={nick}
              onChange={onChangeNick}
            />
          </div>
          <div>
            <label htmlFor="user-password">Password</label>
            <br />
            <Input
              name="user-password"
              type="password"
              required
              value={password}
              onChange={onChangePassword}
            />
          </div>
          <div>
            <label htmlFor="user-password-check">Password Check</label>
            <br />
            <Input
              name="user-password-check"
              type="password"
              required
              value={passwordCheck}
              onChange={onChangePasswordCheck}
            />
          </div>
          {passwordError && (
            <div style={{ color: "red" }}>Confirm password.</div>
          )}
          <div>
            <Checkbox name="user-term" checked={term} onChange={onChangeTerm}>
              I agree.
            </Checkbox>
          </div>
          {termError && <div style={{ color: "red" }}>Must agree.</div>}
          <div style={{ marginTop: 10 }}>
            <Button type="primary" htmlType="submit">
              Signup
            </Button>
          </div>
        </Form>
      </AppLayout>
    </>
  );
};

export default Signup;

```

`useState`ë¥¼ ì´ìš©í•˜ì—¬ ê° í•­ëª©ë“¤ì„ ì •ì˜í•œë‹¤.

`onCheangeXX`ë¡œ ì´ë²¤íŠ¸ë“¤ì„ ì •ì˜í•œë‹¤.

ì£¼ì˜í•´ì•¼ í•  ì ì€ `antd`ì—ì„œ `Checkbox`ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.

```js
const onChangeTerm = e => {
  setTerm(e.target.checked);
};

...

<div>
  <Checkbox name="user-term" checked={term} onChange={onChangeTerm}>
    I agree.
  </Checkbox>
</div>
```

ë‹¤ë¥¸ í•­ëª©ë“¤ì€ `value`ë¡œ ì²˜ë¦¬í•˜ì§€ë§Œ `Checkbox`ëŠ” `checked`ë¡œ ì²˜ë¦¬í•œë‹¤.

`onSubmit`ì—ì„œ `e.preventDefault`ë¥¼ ì´ìš©í•˜ì—¬ console.logë¡œ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.

ì…ë ¥ê°’ ê²€ì¦ì„ ìœ„í•´ `passwordError`, `termError`ë¥¼ ë§Œë“¤ì—ˆë‹¤.

`onSubmit` í•¨ìˆ˜ì— í•´ë‹¹ í•­ëª©ì„ ì¶”ê°€í•œë‹¤.

ê·¸ë¦¬ê³  jsx ì½”ë“œì— ê° í•­ëª©ì— ë§ê²Œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶”ê°€í•œë‹¤.

`onChangePasswordCheck` í•¨ìˆ˜ì— `setPasswordError`ë¥¼ ë„£ì–´ passwordê°€ ì¼ì¹˜í•˜ëŠ”ì§€ ê³„ì† ì²´í¬í•  ìˆ˜ ìˆë‹¤.

custom hookì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ë°˜ë³µì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

```js
import React, { useState } from "react";
import Head from "next/head";
import AppLayout from "../components/AppLayout";
import { Form, Input, Checkbox, Button } from "antd";

const Signup = () => {
  const [passwordCheck, setPasswordCheck] = useState("");
  const [term, setTerm] = useState(false);
  const [passwordError, setPasswordError] = useState(false);
  const [termError, setTermError] = useState(false);

  const onSubmit = e => {
    e.preventDefault();
    if (password !== passwordCheck) {
      return setPasswordError(true);
    }
    if (!term) {
      return setTermError(true);
    }
    console.log({
      id,
      nick,
      password,
      passwordCheck,
      term
    });
  };
  const onChangePasswordCheck = e => {
    setPasswordError(e.target.value !== password);
    setPasswordCheck(e.target.value);
  };
  const onChangeTerm = e => {
    setTermError(false);
    setTerm(e.target.checked);
  };

  const useInput = (initialValue = null) => {
    const [value, setValue] = useState(initialValue);
    const handle = e => {
      setValue(e.target.value);
    };
    return [value, handle];
  };

  const [id, onChangeId] = useInput("");
  const [nick, onChangeNick] = useInput("");
  const [password, onChangePassword] = useInput("");

  return (
    <>
      <Head>
        <title>Nodebird</title>
        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/antd/3.23.6/antd.css"
        />
      </Head>
      <AppLayout>
        <Form onSubmit={onSubmit} style={{ padding: 10 }}>
          <div>
            <label htmlFor="user-id">ID</label>
            <br />
            <Input name="user-id" required value={id} onChange={onChangeId} />
          </div>
          <div>
            <label htmlFor="user-nick">Nick</label>
            <br />
            <Input
              name="user-nick"
              required
              value={nick}
              onChange={onChangeNick}
            />
          </div>
          <div>
            <label htmlFor="user-password">Password</label>
            <br />
            <Input
              name="user-password"
              type="password"
              required
              value={password}
              onChange={onChangePassword}
            />
          </div>
          <div>
            <label htmlFor="user-password-check">Password Check</label>
            <br />
            <Input
              name="user-password-check"
              type="password"
              required
              value={passwordCheck}
              onChange={onChangePasswordCheck}
            />
          </div>
          {passwordError && (
            <div style={{ color: "red" }}>Confirm password.</div>
          )}
          <div>
            <Checkbox name="user-term" checked={term} onChange={onChangeTerm}>
              I agree.
            </Checkbox>
          </div>
          {termError && <div style={{ color: "red" }}>Must agree.</div>}
          <div style={{ marginTop: 10 }}>
            <Button type="primary" htmlType="submit">
              Signup
            </Button>
          </div>
        </Form>
      </AppLayout>
    </>
  );
};

export default Signup;

```

`useCallback`ì„ ì‚¬ìš©í•˜ì—¬ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤ì„ ê°ì‹¸ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.

ì—¬ê¸°ì„œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆëŠ” `onSubmit, onChangeXX`ë“±ì„ ë§í•œë‹¤.

propsë¡œ ë„˜ê²¨ì£¼ëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤ì€ `useCallback`ìœ¼ë¡œ ê°ì‹¸ì£¼ì–´ì•¼ í•œë‹¤.

í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ë“¤ì€ í•˜ë‚˜ì˜ ìƒíƒœê°€ ë°”ë€” ë•Œë§ˆë‹¤ ì „ì²´ê°€ ê°±ì‹ ë˜ë©´ì„œ ê° í•¨ìˆ˜ë“¤ì´ ìƒˆë¡œ ìƒì„±ëœë‹¤.

í•¨ìˆ˜ë“¤ì´ ìƒˆë¡œ ìƒì„±ë˜ë©´ í•¨ìˆ˜ë¥¼ ì „ë‹¬ë°›ì€ ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë‹¤ì‹œ ë Œë”ë§ ëœë‹¤.

í•¨ìˆ˜ë„ ê°ì²´ì´ê¸° ë•Œë¬¸ì— ê°ì²´ëŠ” ë‹¤ì‹œ ìƒì„±í•˜ë©´ ì´ì „ ê°ì²´ì™€ ë‹¤ë¥¸ ê°ì²´ê°€ ëœë‹¤.

custom hook ì•ˆì— ìˆëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë„ `useCallback`ìœ¼ë¡œ ê°ì‹¸ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.

```js
import React, { useState, useCallback } from "react";
import Head from "next/head";
import AppLayout from "../components/AppLayout";
import { Form, Input, Checkbox, Button } from "antd";

const Signup = () => {
  const useInput = (initialValue = null) => {
    const [value, setValue] = useState(initialValue);
    const handle = useCallback(e => {
      setValue(e.target.value);
    }, []);
    return [value, handle];
  };

  const [id, onChangeId] = useInput("");
  const [nick, onChangeNick] = useInput("");
  const [password, onChangePassword] = useInput("");

  const [passwordCheck, setPasswordCheck] = useState("");
  const [term, setTerm] = useState(false);
  const [passwordError, setPasswordError] = useState(false);
  const [termError, setTermError] = useState(false);

  const onSubmit = useCallback(
    e => {
      e.preventDefault();
      if (password !== passwordCheck) {
        return setPasswordError(true);
      }
      if (!term) {
        return setTermError(true);
      }
    },
    [password, passwordCheck, term]
  );
  const onChangePasswordCheck = useCallback(
    e => {
      setPasswordError(e.target.value !== password);
      setPasswordCheck(e.target.value);
    },
    [password]
  );
  const onChangeTerm = useCallback(e => {
    setTermError(false);
    setTerm(e.target.checked);
  }, []);


  return (
    <>
      <Head>
        <title>Nodebird</title>
        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/antd/3.23.6/antd.css"
        />
      </Head>
      <AppLayout>
        <Form onSubmit={onSubmit} style={{ padding: 10 }}>
          <div>
            <label htmlFor="user-id">ID</label>
            <br />
            <Input name="user-id" required value={id} onChange={onChangeId} />
          </div>
          <div>
            <label htmlFor="user-nick">Nick</label>
            <br />
            <Input
              name="user-nick"
              required
              value={nick}
              onChange={onChangeNick}
            />
          </div>
          <div>
            <label htmlFor="user-password">Password</label>
            <br />
            <Input
              name="user-password"
              type="password"
              required
              value={password}
              onChange={onChangePassword}
            />
          </div>
          <div>
            <label htmlFor="user-password-check">Password Check</label>
            <br />
            <Input
              name="user-password-check"
              type="password"
              required
              value={passwordCheck}
              onChange={onChangePasswordCheck}
            />
          </div>
          {passwordError && (
            <div style={{ color: "red" }}>Confirm password.</div>
          )}
          <div>
            <Checkbox name="user-term" checked={term} onChange={onChangeTerm}>
              I agree.
            </Checkbox>
          </div>
          {termError && <div style={{ color: "red" }}>Must agree.</div>}
          <div style={{ marginTop: 10 }}>
            <Button type="primary" htmlType="submit">
              Signup
            </Button>
          </div>
        </Form>
      </AppLayout>
    </>
  );
};

export default Signup;

```

`useCallback`ìœ¼ë¡œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤ì„ ëª¨ë‘ ê°ì‹¸ì£¼ì—ˆë‹¤.

### `Head` ë˜ëŠ” `Layout`ì„ ë³„ë„ë¡œ ë¶„ë¦¬

Chromeì— `React Developer Tools`ë¥¼ ì„¤ì¹˜í•˜ë©´ ìƒíƒœì˜ ë³€í™”ê°€ ìˆì„ ë•Œ re-rendering ë˜ëŠ” ë¶€ë¶„ì„ ì‹œê°í™”í•˜ì—¬ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤.

ê°œë°œìë„êµ¬ -> Components -> View settings -> Highlight updates when components render. check í•˜ë©´ ëœë‹¤.

í˜„ì¬ ìƒíƒœì—ì„œ formì— ê°’ì„ ì…ë ¥í•˜ë©´ `Head` ë¶€ë¶„ê¹Œì§€ ëª¨ë‘ re-render ëœë‹¤.

formì„ ì¼ë‹¨ ê·¸ëŒ€ë¡œ ë‘ë”ë¼ë„ `Head`ë¶€ë¶„ì€ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

`Head`ì™€ `AppLayout`ì€ ëª¨ë“  í˜ì´ì§€ì— ê³µí†µì ìœ¼ë¡œ ì¶œë ¥ë˜ëŠ” í•­ëª©ì´ë¯€ë¡œ ë³„ë„ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

ì½”ë“œ ì¤‘ë³µì„ ì œê±°í•˜ëŠ” ì¸¡ë©´ì—ì„œë„ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

`pages/_app.js` íŒŒì¼ì„ ìƒì„±í•œë‹¤.

```js
import React from "react";
import AppLayout from "../components/AppLayout";
import Head from "next/head";

const Nodebird = ({ Component }) => {
  return (
    <>
      <Head>
        <title>Nodebird</title>
        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/antd/3.23.6/antd.css"
        />
      </Head>
      <AppLayout>
        <Component />
      </AppLayout>
    </>
  );
};

export default Nodebird;

```

ì—¬ê¸°ì— ì‘ì„±ëœ ì½”ë“œëŠ” ëª¨ë“  í˜ì´ì§€ì— ê³µí†µì ìœ¼ë¡œ ì ìš©ëœë‹¤.

propsìœ¼ë¡œ ë°›ì€ `Component`ë¥¼ ì¶”ê°€í•œë‹¤.

`pages` ê²½ë¡œì˜ ëª¨ë“  íŒŒì¼ì— ì¤‘ë³µ ì½”ë“œë¥¼ ì œê±°í•˜ì.

ì´ë ‡ê²Œ ë¶„ë¦¬í•œ í›„ ë‹¤ì‹œ re-renderingì„ í™•ì¸í•´ë³´ë©´ `Head`ì™€ `Layout` ë¶€ë¶„ì€ ì…ë ¥ì— ë°˜ì‘í•˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

## prop-types

propsëŠ” ë¶€ëª¨ë¡œ ë¶€í„° ì „ë‹¬ë°›ì€ ì¸ìë‹¤.

ì´ ì¸ìê°€ ì ì ˆí•œ íƒ€ì…ì´ ì „ë‹¬ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ê³¼ì •ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ `prop-types`ë‹¤.

```js
npm i prop-types
```

ìœ„ì™€ ê°™ì´ ì„¤ì¹˜í•œë‹¤.

`pages/_app.js` íŒŒì¼ì— `prop-types`ë¥¼ ì ìš©í•´ë³´ì.

```js
import React from "react";
import Head from "next/head";
import PropTypes from "prop-types";
import AppLayout from "../components/AppLayout";

const Nodebird = ({ Component }) => {
  return (
    <>
      <Head>
        <title>Nodebird</title>
        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/antd/3.23.6/antd.css"
        />
      </Head>
      <AppLayout>
        <Component />
      </AppLayout>
    </>
  );
};

Nodebird.propTypes = {
  Component: PropTypes.elementType
}

export default Nodebird;

```

`Component` ê°™ì´ jsx ì½”ë“œê°€ ì•„ë‹Œ ê²ƒì€ `PropTypes.elementType`ì´ë‹¤.

```js
import React from "react";
import Link from "next/link";
import PropTypes from "prop-types";
import { Menu, Input, Button } from "antd";

const AppLayout = ({ children }) => {
  return (
    <div>
      <Menu mode="horizontal">
        <Menu.Item key="Home">
          <Link href="/">
            <a>NodeBird</a>
          </Link>
        </Menu.Item>
        <Menu.Item key="Profile">
          <Link href="/profile">
            <a>Profile</a>
          </Link>
        </Menu.Item>
        <Menu.Item key="Search">
          <Input.Search enterButton style={{ verticalAlign: "middle" }} />
        </Menu.Item>
      </Menu>
      <Button>
        <Link href="signup">
          <a>Signup</a>
        </Link>
      </Button>
      {children}
    </div>
  );
};

AppLayout.propTypes = {
  children: PropTypes.node
};

export default AppLayout;

```

`AppLayout`ì˜ `children`ì€ `PropTypes.node`ë¡œ ë¶„ë¥˜ëœë‹¤.

## pages í´ë” ë‚´ì˜ íŠ¹ìˆ˜í•œ íŒŒì¼ë“¤

`pages` í´ë” ë‚´ì— ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ìˆ˜í•œ íŒŒì¼ë“¤ì´ ìˆë‹¤.

`_document.js`

`_app.js`

`_error.js`

`_document.js` íŒŒì¼ì€ html, head, body ê°™ì€ ì—­í• ì„ í•œë‹¤.

`_app.js`ëŠ” reactì˜ root ê°™ì€ ì—­í• ì„ í•œë‹¤.

`_error.js`ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ ì¶œë ¥í•˜ëŠ” í™”ë©´ì´ ëœë‹¤.

ì´ëŸ° íŠ¹ìˆ˜ íŒŒì¼ë“¤ì€ ê¸°ë³¸ìœ¼ë¡œ ë‚´ì¥ë˜ì–´ ë™ì‘í•˜ì§€ë§Œ ì§ì ‘ íŒŒì¼ì„ ë§Œë“¤ë©´ ê¸°ë³¸ ë™ì‘ì„ override í•œë‹¤.

ì´í›„ì— í•„ìš”í•  ë•Œ í•´ë‹¹ íŒŒì¼ë“¤ì„ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ì.

## antd ê·¸ë¦¬ë“œ ì ìš©

`components/AppLayout.js`

```js
import React from "react";
import Link from "next/link";
import PropTypes from "prop-types";
import { Menu, Input, Button, Row, Col } from "antd";

const AppLayout = ({ children }) => {
  return (
    <div>
      <Menu mode="horizontal">
        <Menu.Item key="Home">
          <Link href="/">
            <a>NodeBird</a>
          </Link>
        </Menu.Item>
        <Menu.Item key="Profile">
          <Link href="/profile">
            <a>Profile</a>
          </Link>
        </Menu.Item>
        <Menu.Item key="Search">
          <Input.Search enterButton style={{ verticalAlign: "middle" }} />
        </Menu.Item>
      </Menu>
      <Button>
        <Link href="signup">
          <a>Signup</a>
        </Link>
      </Button>
      <Row>
        <Col xs={24} md={6}>first</Col>
        <Col xs={24} md={12}>second</Col>
        <Col xs={24} md={6}>third</Col>
      </Row>
      {children}
    </div>
  );
};

AppLayout.propTypes = {
  children: PropTypes.node
};

export default AppLayout;

```

antdì˜ ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œì„ ì ìš©í•´ë³´ì.

ê·¸ë¦¬ë“œë¥¼ ì ìš©í•  ë•ŒëŠ” row, col ìˆœìœ¼ë¡œ ì‘ì—…í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

`xs`ëŠ” ê°€ì¥ ì‘ì€ í™”ë©´, ì¦‰ ëª¨ë°”ì¼ í™”ë©´ ì‚¬ì´ì¦ˆë¥¼ ì˜ë¯¸í•œë‹¤.

24ê°€ row ì „ì²´ ê¸¸ì´ë¥¼ ì˜ë¯¸í•œë‹¤.

`md`ëŠ” ì¤‘ê°„ í¬ê¸°, ë°ìŠ¤í¬íƒ‘ í™”ë©´ ì‚¬ì´ì¦ˆë‹¤.

ë°˜ì‘í˜•ì´ê¸° ë•Œë¬¸ì— í™”ë©´ ë¹„ìœ¨ì„ ì¡°ì •í•˜ë©´ `xs`ì™€ `md`ê°€ ìë™ìœ¼ë¡œ ì„¤ì •ëœë‹¤.

ê·¸ë¦¬ë“œì˜ ë‚´ìš©ì„ ì±„ì›Œë³´ì.

```js
import React from "react";
import Link from "next/link";
import PropTypes from "prop-types";
import { Menu, Input, Button, Row, Col, Card, Avatar } from "antd";

const dummy = {
  nickname: "angelx",
  Post: [{}, {}],
  Followings: [{}, {}],
  Followers: [{}, {}, {}]
};

const AppLayout = ({ children }) => {
  return (
    <div>
      <Menu mode="horizontal">
        <Menu.Item key="Home">
          <Link href="/">
            <a>NodeBird</a>
          </Link>
        </Menu.Item>
        <Menu.Item key="Profile">
          <Link href="/profile">
            <a>Profile</a>
          </Link>
        </Menu.Item>
        <Menu.Item key="Search">
          <Input.Search enterButton style={{ verticalAlign: "middle" }} />
        </Menu.Item>
      </Menu>
      <Row>
        <Col xs={24} md={6}>
          <Card
            actions={[
              <div key="twit">
                twit tiwt
                <br />
                {dummy.Post.length}
              </div>,
              <div key="followings">
                followings
                <br />
                {dummy.Followings.length}
              </div>,
              <div key="followers">
                followers
                <br />
                {dummy.Followers.length}
              </div>
            ]}
          >
            <Card.Meta
              avatar={<Avatar>{dummy.nickname[0]}</Avatar>}
              title={dummy.nickname}
            />
          </Card>
          <Link href="/signup">
            <Button>Signup</Button>
          </Link>
        </Col>
        <Col xs={24} md={12}>
          {children}
        </Col>
        <Col xs={24} md={6}>
          third
        </Col>
      </Row>
    </div>
  );
};

AppLayout.propTypes = {
  children: PropTypes.node
};

export default AppLayout;

```

ì½”ë“œê°€ ê¸¸ê¸° ë•Œë¬¸ì— ì²« ë²ˆì§¸ ì»¬ëŸ¼ë§Œ ì˜ë¼ì„œ í™•ì¸í•˜ì.

```js
<Col xs={24} md={6}>
  <Card
    actions={[
      <div key="twit">twit tiwt<br />{dummy.Post.length}</div>,
      <div key="followings">followings<br />{dummy.Followings.length}</div>,
      <div key="followers">followers<br />{dummy.Followers.length}</div>
    ]}
  >
    <Card.Meta
      avatar={<Avatar>{dummy.nickname[0]}</Avatar>}
      title={dummy.nickname}
    />
  </Card>
  <Link href="/signup"><Button>Signup</Button></Link>
</Col>

```

ì²« ë²ˆì§¸ Colì—ëŠ” antdì˜ `Card`ì™€ `Avatar`ë¥¼ ì´ìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ê°„ëµí•œ í”„ë¡œí•„ì„ ë³´ì—¬ì¤€ë‹¤.

`Card`ëŠ” `actions`ë¼ëŠ” í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•˜ì—¬ ì¶”ê°€ ì •ë³´ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

`Card.Meta`ì— `Avatar`ë¥¼ ì´ìš©í•˜ì—¬ avatarì™€ titleì„ ì¶”ê°€í–ˆë‹¤.

### login form ì¶”ê°€

ì²« ë²ˆì§¸ Colì— login formë„ ì¶”ê°€í•œë‹¤.

```js
<Col xs={24} md={6}>
  {dummy.isLoggedIn ? <Card
    actions={[
      <div key="twit">twit tiwt<br />{dummy.Post.length}</div>,
      <div key="followings">followings<br />{dummy.Followings.length}</div>,
      <div key="followers">followers<br />{dummy.Followers.length}</div>
    ]}
  >
    <Card.Meta
      avatar={<Avatar>{dummy.nickname[0]}</Avatar>}
      title={dummy.nickname}
    />
  </Card>
  :
  <Form>
    <div>
      <label htmlFor="user-id">ID</label>
      <br />
      <Input name="user-id" required />
    </div>
    <div>
      <label htmlFor="user-password">Password</label>
      <br />
      <Input name="user-password" required type="password" />
    </div>
    <div>
      <Button type="primary" htmlType="submit" loading={false}>Login</Button>
      <Link href="/signup"><Button>Signup</Button></Link>
    </div>
  </Form>}
</Col>

```

`Card` í•˜ë‹¨ì— `Form`ì„ ì¶”ê°€í•˜ê³  `isLoggedIn`ì´ë¼ëŠ” ë³€ìˆ˜ì˜ ìƒíƒœì— ë”°ë¼ ë‘ í•­ëª©ì„ êµì²´í•˜ì—¬ ì¶œë ¥í•œë‹¤.

```js
<Button type="primary" htmlType="submit" loading={false}>Login</Button>
```

`Button`ì—ì„œ `loading` ì´ë¼ëŠ” ì†ì„±ì€ trueì¼ ê²½ìš° ë¡œë”© ì¤‘ì´ë¼ëŠ” ê²ƒì´ í‘œì‹œëœë‹¤.

`components/AppLayout.js` íŒŒì¼ì´ ì§€ë‚˜ì¹˜ê²Œ ê¸¸ì–´ì§€ê³  ìˆìœ¼ë¯€ë¡œ login ê¸°ëŠ¥ì„ ë¶„ë¦¬í•˜ì.

`components/LoginForm.js`

```js
import React, { useState } from "react";
import Link from "next/link";
import { Form, Input, Button } from "antd";

const LoginForm = () => {
  return (
    <Form>
      <div>
        <label htmlFor="user-id">ID</label>
        <br />
        <Input name="user-id" required />
      </div>
      <div>
        <label htmlFor="user-password">Password</label>
        <br />
        <Input name="user-password" required type="password" />
      </div>
      <div>
        <Button type="primary" htmlType="submit" loading={false}>
          Login
        </Button>
        <Link href="/signup">
          <Button>Signup</Button>
        </Link>
      </div>
    </Form>
  );
};

export default LoginForm;

```

`components/AppLayout.js`

```js
import React from "react";
import Link from "next/link";
import PropTypes from "prop-types";
import { Menu, Input, Row, Col, Card, Avatar } from "antd";
import LoginForm from "./LoginForm";

const dummy = {
  nickname: "angelx",
  Post: [{}, {}],
  Followings: [{}, {}],
  Followers: [{}, {}, {}],
  isLoggedIn: false
};

const AppLayout = ({ children }) => {
  return (
    <div>
      <Menu mode="horizontal">
        <Menu.Item key="Home">
          <Link href="/">
            <a>NodeBird</a>
          </Link>
        </Menu.Item>
        <Menu.Item key="Profile">
          <Link href="/profile">
            <a>Profile</a>
          </Link>
        </Menu.Item>
        <Menu.Item key="Search">
          <Input.Search enterButton style={{ verticalAlign: "middle" }} />
        </Menu.Item>
      </Menu>
      <Row>
        <Col xs={24} md={6}>
          {dummy.isLoggedIn ? (
            <Card
              actions={[
                <div key="twit">
                  twit tiwt
                  <br />
                  {dummy.Post.length}
                </div>,
                <div key="followings">
                  followings
                  <br />
                  {dummy.Followings.length}
                </div>,
                <div key="followers">
                  followers
                  <br />
                  {dummy.Followers.length}
                </div>
              ]}
            >
              <Card.Meta
                avatar={<Avatar>{dummy.nickname[0]}</Avatar>}
                title={dummy.nickname}
              />
            </Card>
          ) : (
            <LoginForm />
          )}
        </Col>
        <Col xs={24} md={12}>
          {children}
        </Col>
        <Col xs={24} md={6}>
          third
        </Col>
      </Row>
    </div>
  );
};

AppLayout.propTypes = {
  children: PropTypes.node
};

export default AppLayout;

```

ì½”ë“œë¥¼ ì–´ë–»ê²Œ ë¶„í• í• ì§€ ê²°ì •í•˜ê¸° ì–´ë µë‹¤ë©´ ì¼ë‹¨ ì‘ì„± í›„ì— í•œ í˜ì´ì§€ì— re-rendering ë˜ëŠ” ìš”ì†Œê°€ ë„ˆë¬´ ë§ì„ ê²½ìš° ë¶„í• ì„ ê³ ë ¤í•˜ì.

ë¶„í• í•  ë•Œ ì¡°ê±´ë¬¸ê³¼ ë¶„ê¸°ë¬¸ì„ ìœ„ì£¼ë¡œ í™•ì¸í•˜ë©´ ë¶„í• í•  ëŒ€ìƒì„ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë‹¤.

`LoginForm`ì„ ë§ˆë¬´ë¦¬ í•´ ë³´ì.

```js
import React, { useCallback } from "react";
import Link from "next/link";
import { Form, Input, Button } from "antd";
import useInput from "./useInput";

const LoginForm = () => {
  const [id, onChangeId] = useInput("");
  const [password, onChangePassword] = useInput("");
  const onSubmit = useCallback(e => {
    e.preventDefault();
    console.log({
      id,
      password
    });
  }, [id, password]);

  return (
    <Form onSubmit={onSubmit}>
      <div>
        <label htmlFor="user-id">ID</label>
        <br />
        <Input name="user-id" required value={id} onChange={onChangeId} />
      </div>
      <div>
        <label htmlFor="user-password">Password</label>
        <br />
        <Input
          name="user-password"
          required
          type="password"
          value={password}
          onChange={onChangePassword}
        />
      </div>
      <div>
        <Button type="primary" htmlType="submit" loading={false}>
          Login
        </Button>
        <Link href="/signup">
          <Button>Signup</Button>
        </Link>
      </div>
    </Form>
  );
};

export default LoginForm;

```

ì§€ë‚œ ë²ˆì— ì‘ì„±í–ˆë˜ `useInput`ì„ ë³„ë„ì˜ custom hookìœ¼ë¡œ ë§Œë“¤ì–´ ì¬ì‚¬ìš©í–ˆë‹¤.

## Home í™”ë©´ ì‘ì„±

`pages/index.js`

```js
import React from "react";
import { Form, Input, Button, Icon, Card, Avatar } from "antd";

const dummy = {
  isLoggedIn: true,
  imagePaths: [],
  mainPosts: [
    {
      User: {
        id: 1,
        nickname: "angelx"
      },
      content: "First tweet",
      img: "https://newsimg.hankookilbo.com/2019/04/29/201904291390027161_3.jpg"
    }
  ]
};

const Home = () => {
  return (
    <>
      {dummy.isLoggedIn && (
        <Form encType="multipart/form-data" style={{ marginBottom: 20 }}>
          <Input.TextArea
            maxLength={140}
            placeholder="ì–´ë–¤ ì‹ ê¸°í•œ ì¼ì´ ìˆì—ˆë‚˜ìš”?"
          />
          <div>
            <input type="file" multiple hidden />
            <Button>Image Upload</Button>
            <Button type="primary" style={{ float: "right" }} htmlType="submit">
              twit
            </Button>
          </div>
          <div>
            {dummy.imagePaths.map((v, i) => {
              return (
                <div key={v} style={{ display: "inline-block" }}>
                  <img
                    src={"http://localhost:3065" + v}
                    style={{ width: "200px" }}
                    alt={v}
                  />
                  <div>
                    <Button>Delete</Button>
                  </div>
                </div>
              );
            })}
          </div>
        </Form>
      )}
      {dummy.mainPosts.map(c => (
        <Card
          key={+c.createdAt}
          cover={c.img && <img alt="example" src={c.img} />}
          actions={[
            <Icon type="retweet" key="retweet" />,
            <Icon type="heart" key="heart" />,
            <Icon type="message" key="message" />,
            <Icon type="ellipsis" key="ellipsis" />
          ]}
          extra={<Button>Follow</Button>}
        >
          <Card.Meta
            avatar={<Avatar>{c.User.nickname[0]}</Avatar>}
            title={c.User.nickname}
            description={c.content}
          />
        </Card>
      ))}
    </>
  );
};

export default Home;

```

ì¼ë‹¨ ë™ì‘ì€ í•˜ëŠ” ì½”ë“œë‹¤.

ì—¬ëŸ¬ ê°€ì§€ í•­ëª©ë“¤ì´ ë‹¤ í¬í•¨ë˜ì–´ ìˆì–´ì„œ í•˜ë‚˜ì”© ëœ¯ì–´ë´ì•¼ í•œë‹¤.

ì¼ë‹¨ ë‚˜ì¤‘ì— ë¶„ì„í•  í•­ëª©ë“¤ë§Œ ë‚˜ì—´í•˜ê³  ë°±ì•¤ë“œë¡œ ë„˜ì–´ê°€ë ¤ê³  í•œë‹¤.

### Form

```js
{dummy.isLoggedIn && (
  <Form encType="multipart/form-data" style={{ marginBottom: 20 }}>
    <Input.TextArea
      maxLength={140}
      placeholder="ì–´ë–¤ ì‹ ê¸°í•œ ì¼ì´ ìˆì—ˆë‚˜ìš”?"
    />
    <div>
      <input type="file" multiple hidden />
      <Button>Image Upload</Button>
      <Button type="primary" style={{ float: "right" }} htmlType="submit">
        twit
      </Button>
    </div>
    <div>
      {dummy.imagePaths.map((v, i) => {
        return (
          <div key={v} style={{ display: "inline-block" }}>
            <img
              src={"http://localhost:3065" + v}
              style={{ width: "200px" }}
              alt={v}
            />
            <div>
              <Button>Delete</Button>
            </div>
          </div>
        );
      })}
    </div>
  </Form>
)}
```

### Card

```js
{dummy.mainPosts.map(c => (
  <Card
    key={+c.createdAt}
    cover={c.img && <img alt="example" src={c.img} />}
    actions={[
      <Icon type="retweet" key="retweet" />,
      <Icon type="heart" key="heart" />,
      <Icon type="message" key="message" />,
      <Icon type="ellipsis" key="ellipsis" />
    ]}
    extra={<Button>Follow</Button>}
  >
    <Card.Meta
      avatar={<Avatar>{c.User.nickname[0]}</Avatar>}
      title={c.User.nickname}
      description={c.content}
    />
  </Card>
))}
```

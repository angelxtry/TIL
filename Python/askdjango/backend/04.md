# view

URLConf에 매핑된 Callable Object

첫 번째 인자로 HttpRequest를 받는다.

반드시 HttpRespose를 리턴해야 한다.

크게 Function Based View와 Class Based View로 구분한다.

```py
# dojo/views.py
from django.http import HttpResponse
from django.shortcuts import render

def mysum(request, numbers):
    result = sum(map(lambda s: int(s or 0) , numbers.split('/')))
    return HttpResponse(result)

def hello(request, name, age):
    return HttpResponse("안녕하세요. {}. {}살 이시군요.".format(name, age))

def post_list1(request):
    name = '공유'
    return HttpResponse("""
        <h1>AskDjango</h1>
        <p>{name}</p>
        <p>Django Study</p>
    """.format(name=name))
```

```py
# dojo/urls.py
from django.conf.urls import url
from . import views

urlpatterns = [
    url(r'^sum/(?P<numbers>[\d/]+)/$', views.mysum),
    url(r'^hello/(?P<name>[ㄱ-힣]+)/(?P<age>\d+)/$', views.hello),
    url(r'^post1/$', views.post_list1),
]
```

----

```py
# dojo/views.py
from django.http import HttpResponse
from django.shortcuts import render

def mysum(request, numbers):
    result = sum(map(lambda s: int(s or 0) , numbers.split('/')))
    return HttpResponse(result)

def hello(request, name, age):
    return HttpResponse("안녕하세요. {}. {}살 이시군요.".format(name, age))

def post_list1(request):
    name = '공유'
    return HttpResponse("""
        <h1>AskDjango</h1>
        <p>{name}</p>
        <p>Django Study</p>
    """.format(name=name))

def post_list2(request):
    name = '도깨비'
    return render(request, 'dojo/post_list.html', {'name': name})
```

```py
# dojo/urls.py
from django.conf.urls import url
from . import views

urlpatterns = [
    url(r'^sum/(?P<numbers>[\d/]+)/$', views.mysum),
    url(r'^hello/(?P<name>[ㄱ-힣]+)/(?P<age>\d+)/$', views.hello),
    url(r'^post1/$', views.post_list1),
    url(r'^post2/$', views.post_list2),
]
```

`dojo/templates/dojo/post_list.html`
```py
<h1>AskDjango</h1>
<p>{{ name }}</p>
<p>Django Study</p>

<hr/>

dojo/post_list.html

```

여기까지 입력하고 실행했는데 계속 `TemplateDoesNotExist`가 발생했다.

아무리 철자를 봐도 틀린게 없었다.

서버를 몇 번이나 껐다켜봐도 정상적으로 페이지가 출력되지 않았다.

한참을 헤메다가 원인을 찾았다.

`askdjango/settings.py`의 `INSTALLED APPS`에 dojo를 등록하지 않은 것이다.

보통 app을 만들자마자 등록하는데 잊어버렸나보다.

근데 여기에 등록하지 않아도 템플릿을 쓰지 않으면 어느 정도는 동작하는 것을 처음 알았다.

오늘도 하나 배웠다.

----

```py
# dojo/views.py
from django.http import JsonResponse, HttpResponse
from django.shortcuts import render

def mysum(request, numbers):
    result = sum(map(lambda s: int(s or 0) , numbers.split('/')))
    return HttpResponse(result)


def hello(request, name, age):
    return HttpResponse("안녕하세요. {}. {}살 이시군요.".format(name, age))


def post_list1(request):
    name = '공유'
    return HttpResponse("""
        <h1>AskDjango</h1>
        <p>{name}</p>
        <p>Django Study</p>
    """.format(name=name))


def post_list2(request):
    name = '도깨비'
    return render(request, 'dojo/post_list.html', {'name': name})


def post_list3(request):
    return JsonResponse({
        'message': 'Ask Django',
        'item': ['python', 'django', 'celery']
    }, json_dumps_params={'ensure_ascii': False})
```

```py
# dojo/urls.py
from django.conf.urls import url
from . import views

urlpatterns = [
    url(r'^sum/(?P<numbers>[\d/]+)/$', views.mysum),
    url(r'^hello/(?P<name>[ㄱ-힣]+)/(?P<age>\d+)/$', views.hello),
    url(r'^post1/$', views.post_list1),
    url(r'^post2/$', views.post_list2),
    url(r'^post3/$', views.post_list3),
]
```
# 파트6. 장바구니 예제

```js
const products = [
  { name: '반팔티', price: 15000, quantity: 1 },
  { name: '긴팔티', price: 20000, quantity: 2 },
  { name: '핸드폰케이스', price: 15000, quantity: 3 },
  { name: '후드티', price: 30000, quantity: 4 },
  { name: '바지', price: 25000, quantity: 5 },
];

go(
  products,
  map(p => p.quantity),
  reduce((a, b) => a + b),
  log);
```

go 코드를 함수로 만들어보자.

```js
const total_quantity = products => go(
  products,
  map(p => p.quantity),
  reduce((a, b) => a + b));
log(total_quantity(products));
```

```js
const total_quantity = pipe(
  map(p => p.quantity),
  reduce((a, b) => a+b));
log(total_quantity(products));
```

수량과 가격을 곱한 값을 모두 더하는 코드

```js
const total_price = pipe(
  map(p => p.quantity * p.price),
  reduce(add));
log(total_price(products));
```

map과 reduce가 반복되므로 추상화 수준을 높여 반복을 제거해본다.

```js
const add = (a, b) => a + b;

const sum = (f, iter) => go(
  iter,
  map(f),
  reduce(add));

const total_quantity = products =>
  sum(p => p.quantity, products);
const total_price = products =>
  sum(p => p.quantity * p.price, products);
```

sum을 curry로 감싸주면 코드가 더 간결해진다.

```js
const sum = curry((f, iter) => go(
  iter,
  map(f),
  reduce(add)));

const total_quantity = sum(p => p.quantity);
const total_price = sum(p => p.quantity * p.price);
```

sum은 추상화 레벨이 높아 다른 데이터에도 사용할 수 있다.

```js
const total_age = sum(
  u => u.age, [
    { name: 'a', age: 10 },
    { name: 'b', age: 20 },
    { name: 'c', age: 30 },
  ]);
log(total_age);
```

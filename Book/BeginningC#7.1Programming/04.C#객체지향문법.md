# 04. C# 객체지향 문법

```cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApp1
{
    class Program
    {
        static void Main(string[] args)
        {
            Book gulliver = new Book();
        }
    }

    class Book
    {
        string Title;
        decimal ISBN13;
        string Contents;
        string Author;
        int PageCount;
    }
}
```

* C#에서는 class의 attribute를 field라고 한다.
* C#에서는 클래스 밖에서 메서드를 정의할 수 없다.
* 생성자
  * 반환 타입이 없고 클래스 이름과 동일한 `public <class name>`
  * 생성자를 명시적으로 정의하지 않았다면 C# 컴파일러는 빈 생성자를 만들어놓고 컴파일 한다.
  * 생성자를 여러 개 정의하는 것도 가능하다.
* 소멸자
  * `~<class name>`
  * 소멸자를 정의하기 전에 신중하자.
  * GC입장에서는 소멸자가 정의된 클래스의 객체를 관리하는 것이 더 복잡하다.
  * 닷넷이 관리하지 않는 시스템 자원을 얻은 경우에만 소멸자를 정의하는 것도 좋다.

* static 예약어를 사용하여 정적 필드를 만든다.

```cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApp1
{
    class Person
    {
        static public int CountOfInstance;
        public string _name;

        public Person(string name)
        {
            CountOfInstance++;
            _name = name;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(Person.CountOfInstance);
            Person person1 = new Person("홍길동");
            Person person2 = new Person("홍홍홍");

            Console.WriteLine(Person.CountOfInstance);
        }
    }
}
```

* 특정 클래스의 인스턴스를 의도적으로 단 한 개만 만들고 싶은 경우
* 클래스 밖에서 해당 클래스의 인스턴스를 만들지 못하게 생성자를 private 접근 제한자로 명시하고 단 하나의 인스턴스만 클래스 내부에서 미리 생성해 둔다.

```cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApp1
{
    class Person
    {
        static public Person President = new Person("대통령");
        string _name;

        private Person(string name)
        {
            _name = name;
        }

        public void DisplayName()
        {
            Console.WriteLine(_name);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Person.President.DisplayName();
            // Person person1 = new Person("홍길동"); // 생성자가 private이므로 오류
        }
    }
}
```

* 이렇게 인스턴스가 단 하나만 존재하는 타입을 특별하게 singleton 클래스라고 한다.
* 단일 시스템 자원을 책임지는 타입이 필요할 때 사용한다.

#### 4.1.5.2 정적 메서드 static method

* 정적 메서드 안에서는 인스턴스 멤버에 접근할 수 없다.

#### Main 메서드

* entry point
1. 메서드 이름은 반드시 Main
2. 정적 메서드여야 하고
3. Main 메서드가 정의된 클래스의 이름은 제한이 없다.
4. 2개 이상의 클래스에서 Main 메서드를 정의하고 있다면 C# 컴파일러에게 클래스를 지정해야 한다.
5. Main 메서드의 반환값은 void/int만 허용
6. Main 메서드의 매개변수는 없거나 string[] 만 허용됨

```cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApp1
{
    class Program
    {
        static void Main(string[] args)
        {
            if(args.Length < 2)
            {
                return;
            }
            Console.WriteLine(args[0]);
            Console.WriteLine(args[1]);
        }
    }
}
```

#### 4.1.5.3 정적 생성자
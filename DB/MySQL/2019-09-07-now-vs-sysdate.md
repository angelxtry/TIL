# mysql 시간, 날짜 관련 함수, now vs sysdate, 시간 자동 입력 컬럼 만들기

mysql에는 시간, 날짜 관련 함수가 많이 있다.

그 중에 현재 현재 날짜와 시간을 출력하는 함수는 다음의 네 가지 정도가 된다.

## 1. CURDATE()

현재 날짜를 반환한다.

```sql
mysql> select curdate();
+------------+
| curdate()  |
+------------+
| 2019-09-07 |
+------------+
1 row in set (0.00 sec)
```

DATE_FORMAT() 함수를 이용하여 다음과 같이 활용할 수 있다.

```sql
mysql> select date_format(curdate(), '%Y%m%d');
+----------------------------------+
| date_format(curdate(), '%Y%m%d') |
+----------------------------------+
| 20190907                         |
+----------------------------------+
1 row in set (0.00 sec)
```

## 2. CURTIME()

현재 시간을 반환한다.

```sql
mysql> select date_format(curdate(), '%Y%m%d');
+----------------------------------+
| date_format(curdate(), '%Y%m%d') |
+----------------------------------+
| 20190907                         |
+----------------------------------+
1 row in set (0.00 sec)

mysql> select curtime();
+-----------+
| curtime() |
+-----------+
| 12:55:37  |
+-----------+
1 row in set (0.00 sec)
```

## 3. NOW()

현재 날짜와 시간을 반환한다.

```sql
mysql> select now();
+---------------------+
| now()               |
+---------------------+
| 2019-09-07 12:56:31 |
+---------------------+
1 row in set (0.00 sec)
```

## 4. SYSDATE()

NOW()와 같은 포멧으로 현재 날짜와 시간을 반환한다.

```sql
mysql> select sysdate();
+---------------------+
| sysdate()           |
+---------------------+
| 2019-09-07 12:57:51 |
+---------------------+
1 row in set (0.00 sec)
```

## NOW() vs. SYSDATE()

NOW()는 트렌젝션 동안 같은 시간을 반환한다.

```sql
mysql> select now(), sleep(2), now();
+---------------------+----------+---------------------+
| now()               | sleep(2) | now()               |
+---------------------+----------+---------------------+
| 2019-09-07 12:59:41 |        0 | 2019-09-07 12:59:41 |
+---------------------+----------+---------------------+
1 row in set (2.00 sec)
```

SYSDATE()는 해당 함수가 실행된 시간이 출력된다.

```sql
mysql> select sysdate(), sleep(2), sysdate();
+---------------------+----------+---------------------+
| sysdate()           | sleep(2) | sysdate()           |
+---------------------+----------+---------------------+
| 2019-09-07 13:00:42 |        0 | 2019-09-07 13:00:44 |
+---------------------+----------+---------------------+
1 row in set (2.01 sec)
```

NOW()가 언제 필요할지 잘 모르겠다. SYSDATE()를 훨씬 더 많이 쓰게되지 않을까?

## table 생성 시 자동 시간 입력 컬럼 만들기

```sql
CREATE TABLE messages (
  time_stamp timestamp DEFAULT CURRENT_TIMESTAMP
);
```

## 참고사이트

[SYSDATE() 와 NOW()의 차이점](http://intomysql.blogspot.com/2010/12/sysdate-now.html)

# js-testing-fundamentals

## basic

```js
const sum = (a, b) => a - b;

const result = sum(3, 7);
const expected = 10;

if (result !== expected) {
  throw new Error(`${result} is not equal to ${expected}`);
}
```

sum í•¨ìˆ˜ë¥¼ ì„ ì–¸í•  ë•Œ ì‹¤ìˆ˜ê°€ ìˆì–´ì„œ a + bë¥¼ a - bë¡œ ì‘ì„±í–ˆë‹¤.

ì´ ê²½ìš° Errorê°€ ë°œìƒí•œë‹¤.

```js
const sum = (a, b) => a + b;
const subtract = (a, b) => a - b;

let result, expected;

result = sum(3, 7);
expected = 10;

if (result !== expected) {
  throw new Error(`${result} is not equal ${expected}`);
}

result = subtract(7, 3);
expected = 4;

if (result !== expected) {
  throw new Error(`${result} is not equal to ${expected}`);
}
```

í…ŒìŠ¤íŠ¸ë¥¼ í•˜ë‚˜ ë” ì¶”ê°€í–ˆë‹¤.

í…ŒìŠ¤íŠ¸ ê³¼ì •ì„ ì¶”ìƒí™”í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì¤‘ë³µì„ ì œê±°í•  ìˆ˜ ìˆë‹¤.

```js
const sum = (a, b) => a + b;
const subtract = (a, b) => a - b;

let result, expected;

result = sum(3, 7);
expected = 10;

expect(result).toBe(expected);

result = subtract(7, 3);
expected = 4;

expect(result).toBe(expected);

function expect(actual) {
  return {
    toBe(expected) {
      if (actual !== expected) {
        throw new Error(`${actual} is not equal to ${expected}`);
      }
    }
  }
}
```

expect í•¨ìˆ˜ëŠ” ì¼ë°˜ í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ì²˜ëŸ¼ assert í•¨ìˆ˜ë¥¼ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```js
function expect(actual) {
  return {
    toBe(expected) {
      if (actual !== expected) {
        throw new Error(`${actual} is not equal to ${expected}`);
      }
    },
    toEqual(expected) {},
    toBeGreaterThen(expected) {},
  }
}
```

í˜„ì¬ ì½”ë“œëŠ” sumì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê³¼ì •ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ subtractë¥¼ í…ŒìŠ¤íŠ¸ í•˜ê¸° ì „ì— í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œëœë‹¤.

í…ŒìŠ¤íŠ¸ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒê³¼ ë¬´ê´€í•˜ê²Œ ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ë™ì‘í•˜ë„ë¡ í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤.

```js
const sum = (a, b) => a - b;
const subtract = (a, b) => a - b;

let result, expected;

result = sum(3, 7);
expected = 10;

function sumTest() {
  expect(result).toBe(expected);
}

test('sum test', sumTest);

result = subtract(7, 3);
expected = 4;

function subtractTest() {
  expect(result).toBe(expected);
}

test('subtract test', subtractTest);

function expect(actual) {
  return {
    toBe(expected) {
      if (actual !== expected) {
        throw new Error(`${actual} is not equal to ${expected}`);
      }
    },
    toEqual(expected) {},
    toBeGreaterThen(expected) {},
  }
}

function test(text, callback) {
  try {
    callback();
    console.log(`âœ… ${text}`);
  } catch (error) {
    console.error(`ğŸš¨${text}`);
    console.error(error);
  }
}
```

ì½”ë“œë¥¼ ì¢€ ë” ë‹¤ë“¬ìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```js
const sum = (a, b) => a - b;
const subtract = (a, b) => a - b;

test('sum test', () => {
  const result = sum(3, 7);
  const expected = 10;
  expect(result).toBe(expected);
});

test('subtract test', () => {
  const result = subtract(7, 3);
  const expected = 4;
  expect(result).toBe(expected);
});

function expect(actual) {
  return {
    toBe(expected) {
      if (actual !== expected) {
        throw new Error(`${actual} is not equal to ${expected}`);
      }
    },
    toEqual(expected) {},
    toBeGreaterThen(expected) {},
  }
}

function test(text, callback) {
  try {
    callback();
    console.log(`âœ… ${text}`);
  } catch (error) {
    console.error(`ğŸš¨ ${text}`);
    console.error(error);
  }
}
```

asyncë„ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

```js
const sum = (a, b) => a - b;
const subtract = (a, b) => a - b;

const sumAsync = (a, b) => Promise.resolve(sum(a, b));
const subtractAsync = (a, b) => Promise.resolve(subtract(a, b));

function expect(actual) {
  return {
    toBe(expected) {
      if (actual !== expected) {
        throw new Error(`${actual} is not equal to ${expected}`);
      }
    }
  }
}

async function test(text, callback) {
  try {
    await callback();
    console.log(`âœ… ${text}`);
  } catch (error) {
    console.error(`ğŸš¨ ${text}`);
    console.error(error);
  }
}

test('sum test', () => {
  const result = sum(3, 7);
  const expected = 10;
  expect(result).toBe(expected);
});

test('subtract test', () => {
  const result = subtract(7, 4);
  const expected = 3;
  expect(result).toBe(expected);
});

test('sum async test', async () => {
  const result = await sumAsync(3, 7);
  const expected = 10;
  expect(result).toBe(expected);
})
```

sumAsyncê°€ ë¹„ë™ê¸° í•¨ìˆ˜ì´ê³  promiseë¥¼ ë°˜í™˜í•œë‹¤.

ë”°ë¼ì„œ testì—ì„œ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ í•¨ìˆ˜(sumAsync)ë¥¼ í˜¸ì¶œí•  ë•Œ async, awaitë¥¼ ì¶”ê°€í•œë‹¤.

ê·¸ë¦¬ê³  test í•¨ìˆ˜ ì„ ì–¸ì—ì„œë„ asyncì™€ awaitë¥¼ ì¶”ê°€í•´ì•¼ë§Œ í•œë‹¤.

## globalë¡œ ì„ ì–¸

test, expect í•¨ìˆ˜ëŠ” ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ íŒŒì¼ì—ì„œ ì‚¬ìš©ë  ê²ƒì´ë‹¤.

ê·¸ëŸ¬ë¯€ë¡œ ë‘ í•¨ìˆ˜ëŠ” globalë¡œ ì„ ì–¸í•˜ë©´ ì‚¬ìš©í•˜ê¸° í¸ë¦¬í•˜ë‹¤.

root ê²½ë¡œì— setup-globals.js ë¼ëŠ” íŒŒì¼ì„ ìƒì„±í•˜ê³  test, expect í•¨ìˆ˜ë¥¼ ì˜®ê¸´ë‹¤.

```js
function expect(actual) {
  return {
    toBe(expected) {
      if (actual !== expected) {
        throw new Error(`${actual} is not equal to ${expected}`);
      }
    }
  }
}

async function test(text, callback) {
  try {
    await callback();
    console.log(`âœ… ${text}`);
  } catch (error) {
    console.error(`ğŸš¨${text}`);
    console.error(error);
  }
}

global.expect = expect;
global.test = test;
```

cliì—ì„œ node --require ./setup-globals.js simple-my.js ì™€ ê°™ì´ ì‹¤í–‰í•˜ë©´ ê°™ì€ íŒŒì¼ì— í•´ë‹¹ í•¨ìˆ˜ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ì‹¤í–‰ëœë‹¤.

ì´ ê³¼ì •ì€ jestë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ìœ ì‚¬í•˜ë‹¤.

jestë¥¼ ì„¤ì¹˜í•˜ê³  npx jestë¡œ ì‹¤í–‰í•˜ë©´ simple.test.js ì™€ ê°™ì´ íŒŒì¼ëª…ì´ ì„¤ì •ëœ íŒŒì¼ì´ ì‹¤í–‰ëœë‹¤.
